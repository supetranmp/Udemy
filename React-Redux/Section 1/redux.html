<html>
    <header>
        <title>Redux Basic Example</title>
        <!-- Step 1.1 -->
        <script src="../Scripts/redux.min.js"></script>
        <!-- End of Step 1.1 -->
    </header>
    <body>
        <div>
            <p>
                Clicked : <span id="value">0</span> times
                <button id="decrement">Decrease</button>
                <button id="incrementAsync">Increment Async</button>
            </p>
        </div>
        <script>
            // Step 1.2
            var store = Redux.createStore(counterReducer);
            // End of Step 1.2

            // Step 2.2
            function counterReducer(currentState, action) {
                var DEFAULT_STATE = {
                    count: 0,
                    sum: 0
                };
                var nextState = Object.assign({}, currentState);

                if (currentState === undefined) {
                    nextState = DEFAULT_STATE;
                    return nextState;
                }
            }
            // End of Step 2.2

            // Render
            var valueElement = document.getElementById('value');
            (function render() {
                valueElement.innerHTML = store.getState().count;
            })();

            document.getElementById('decrement')
                .addEventListener('click', function() {
                    valueElement.innerHTML = valueElement.innerHTML - 1;
                });

            document.getElementById('incrementAsync')
                .addEventListener('click', function() {
                    setTimeout(function() {
                        valueElement.innerHTML = parseInt(valueElement.innerHTML) + 1;
                    }, 1000);
                });
        </script>
    </body>
</html>